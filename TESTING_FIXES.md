# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–î—É–±–ª–∏–∫–∞—Ç—ã –ø–ª–∏—Ç–æ–∫** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ –æ–±–æ–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –æ–¥–Ω–∞ –ø–ª–∏—Ç–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–∞ –≤–∏–¥—è—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ë)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –≤ `handleRemoteStream` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π socketId
- –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–ª–∏—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü–ª–∏—Ç–∫–∞ "–í—ã" –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫

### 2. **–ö–∞–º–µ—Ä–∞ –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏** ‚úÖ  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã, –æ–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å (–≥–æ—Ä–µ–ª–∞ –ª–∞–º–ø–æ—á–∫–∞)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
- –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã: `track.stop()` - **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞–º–µ—Ä—É**
- –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞: `track.stop()` - **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω**
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏: –ø–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ —á–µ—Ä–µ–∑ `getUserMedia()`
- –¢—Ä–µ–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö peer connections

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```
Ctrl + F5 –∏–ª–∏ Cmd + Shift + R
```
–í **–æ–±–æ–∏—Ö** –æ–∫–Ω–∞—Ö/–≤–∫–ª–∞–¥–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∏—Ç–æ–∫

#### –£—á–∞—Å—Ç–Ω–∏–∫ –ê (–ø–µ—Ä–≤—ã–π):
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å **1 –ø–ª–∏—Ç–∫–∞ "–í—ã"** (–≤–∞—à–µ –≤–∏–¥–µ–æ)
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å **1 –ø–ª–∏—Ç–∫–∞ —Å –∏–º–µ–Ω–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ë**

#### –£—á–∞—Å—Ç–Ω–∏–∫ –ë (–≤—Ç–æ—Ä–æ–π):
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å **1 –ø–ª–∏—Ç–∫–∞ "–í—ã"** (–≤–∞—à–µ –≤–∏–¥–µ–æ)
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å **1 –ø–ª–∏—Ç–∫–∞ —Å –∏–º–µ–Ω–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ê**

#### ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- –î–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–ª–∏—Ç–∫–∏
- –£ –æ–±–æ–∏—Ö –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø–ª–∏—Ç–∫–∞ (–∫—Ä–æ–º–µ "–í—ã")
- –î—É–±–ª–∏–∫–∞—Ç–æ–≤

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã

1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∫–∞–º–µ—Ä—ã** üìπ (–¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –∫—Ä–∞—Å–Ω–æ–π)

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ:**
   - –ù–∞ –Ω–æ—É—Ç–±—É–∫–µ: **–ª–∞–º–ø–æ—á–∫–∞ –∫–∞–º–µ—Ä—ã –¥–æ–ª–∂–Ω–∞ –ø–æ–≥–∞—Å–Ω—É—Ç—å** üí°‚ùå
   - –í Windows: –∏–∫–æ–Ω–∫–∞ –∫–∞–º–µ—Ä—ã –≤ —Ç—Ä–µ–µ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
   - –ù–∞ Mac: –∑–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–º–µ—Ä—ã –¥–æ–ª–∂–µ–Ω –ø–æ–≥–∞—Å–Ω—É—Ç—å

3. **–ù–∞ –≤–∞—à–µ–π –ø–ª–∏—Ç–∫–µ:**
   - –í–º–µ—Å—Ç–æ –≤–∏–¥–µ–æ –ø–æ—è–≤–∏—Ç—Å—è –∞–≤–∞—Ç–∞—Ä —Å –ø–µ—Ä–≤–æ–π –±—É–∫–≤–æ–π –∏–º–µ–Ω–∏
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–í—ã" –æ—Å—Ç–∞–Ω–µ—Ç—Å—è

4. **–£ –¥—Ä—É–≥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:**
   - –í–∞—à–∞ –ø–ª–∏—Ç–∫–∞ –ø–æ–∫–∞–∂–µ—Ç –∞–≤–∞—Ç–∞—Ä (–Ω–µ –≤–∏–¥–µ–æ)

5. **–í–∫–ª—é—á–∏—Ç–µ –∫–∞–º–µ—Ä—É –æ–±—Ä–∞—Ç–Ω–æ:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–Ω–æ–≤–∞
   - –õ–∞–º–ø–æ—á–∫–∞ –∫–∞–º–µ—Ä—ã **—Å–Ω–æ–≤–∞ –∑–∞–≥–æ—Ä–∏—Ç—Å—è** üí°‚úÖ
   - –í–∏–¥–µ–æ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –ø–ª–∏—Ç–∫–µ

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω

–¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ üé§
2. –ú–∏–∫—Ä–æ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è
3. –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ - —Å–Ω–æ–≤–∞ –≤–∫–ª—é—á–∏—Ç—Å—è

---

## üìä –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–û—Ç–∫—Ä–æ–π—Ç–µ **–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** (F12):

### –ü—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:

**–£ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:**
```
–ù–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è: {socketId: "xxx", username: "..."}
```

**–£ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:**
```
–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏: [{socketId: "yyy", ...}]
–°–æ–∑–¥–∞—é offer –¥–ª—è: yyy
```

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ—Ç–æ–∫–∞:
```
–ü–æ–ª—É—á–µ–Ω track –æ—Ç: xxx kind: video
–î–æ–±–∞–≤–ª—è–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç: xxx
```

### –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –ø–æ—Ç–æ–∫ (–¥–æ–ª–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è):
```
–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫
```

### ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
InvalidStateError: Called in wrong state...
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

### –ü–ª–∏—Ç–∫–∏:
- ‚úÖ –£ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å–≤–æ—è –ø–ª–∏—Ç–∫–∞ "–í—ã"
- ‚úÖ –ü–ª–∏—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ö–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö

### –ö–∞–º–µ—Ä–∞/–ú–∏–∫—Ä–æ—Ñ–æ–Ω:
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è **—Ñ–∏–∑–∏—á–µ—Å–∫–∏** –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –õ–∞–º–ø–æ—á–∫–∞ –∫–∞–º–µ—Ä—ã –≥–∞—Å–Ω–µ—Ç –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
- ‚úÖ –õ–∞–º–ø–æ—á–∫–∞ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏
- ‚úÖ –ê–≤–∞—Ç–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –∫–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞
- ‚úÖ –í–∏–¥–µ–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞

### WebRTC:
- ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∏–¥–µ–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞)
- ‚úÖ –ê—É–¥–∏–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω)
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–π (InvalidStateError)

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```bash
Ctrl + F5
```

### 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
- Chrome: Ctrl+Shift+Del ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
- Firefox: Ctrl+Shift+Del ‚Üí –ö–µ—à

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose restart
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```bash
docker-compose logs -f
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç)

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

### frontend/src/hooks/useWebRTC.ts
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä socketId –≤ `handleRemoteStream`
- –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø–æ—Ç–æ–∫–∏ –æ—Ç —Å–≤–æ–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ socketId

### frontend/src/services/webrtcService.ts
- `toggleCamera()` —Ç–µ–ø–µ—Ä—å `async` –∏ –¥–µ–ª–∞–µ—Ç `track.stop()`
- `toggleMicrophone()` —Ç–µ–ø–µ—Ä—å `async` –∏ –¥–µ–ª–∞–µ—Ç `track.stop()`
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ - –ø–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫
- –û–±–Ω–æ–≤–ª—è–µ–º —Ç—Ä–µ–∫–∏ –≤–æ –≤—Å–µ—Ö peer connections

### backend/src/services/webrtcSignaling.js
- –†–∞–∑–¥–µ–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è: `user-joined` –∏ `existing-participants`
- –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–æ–∑–¥–∞–µ—Ç offers
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—á–∞—é—Ç

---

## ‚ú® –ò—Ç–æ–≥:

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
- ‚úÖ –î—É–±–ª–∏–∫–∞—Ç—ã –ø–ª–∏—Ç–æ–∫ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ö–∞–º–µ—Ä–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- ‚úÖ –ú–∏–∫—Ä–æ—Ñ–æ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- ‚úÖ WebRTC —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ!** üöÄ

